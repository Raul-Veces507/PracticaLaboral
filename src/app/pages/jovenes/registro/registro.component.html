<br>

<div class="container">

    <p-card header="Bienvenido" [style]="{'width': '100%', 'margin-bottom': '2em'}">
        <form [formGroup]="miFormulario" (ngSubmit)="registrase()">
        <div class="row g-3">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Primer Nombre</label>
                    <input  formControlName="nombre1" type="text" class="form-control"  autocomplete="off" id="nombre">
                    <span *ngIf="campoNoValido('nombre1')" class="form-text text-danger">*coloque un nombre
                        valido
                    </span>

                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Segundo Nombre</label>
                    <input  formControlName="nombre2" type="text"  class="form-control" autocomplete="off" id="nombre2">
                   

                </div>
            </div>
        </div>

        <div class="row g-3">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Primer Apellido</label>
                    <input  formControlName="apellido1"  type="text"  class="form-control" autocomplete="off"
                        id="apellido">
                        <span *ngIf="campoNoValido('apellido1')" class="form-text text-danger">*coloque un apellido
                            valido
                        </span>

                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Segundo Apellido</label>
                    <input  formControlName="apellido2" type="text" class="form-control" id="apellido2" autocomplete="off"
                        >
                  

                </div>
            </div>
        </div>

        <div class="row g-3">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Cedula</label>
                    <input oninput="this.value = this.value.replace(/[^0-9-]/,'')"  formControlName="Cedula" type="text" class="form-control" id="cedula" autocomplete="off">
                    <span *ngIf="campoNoValido('Cedula')" class="form-text text-danger">*coloque una cedula 
                        valida
                    </span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                   <label for="recipient-name" class="col-form-label">Sexo</label>
                   <select formControlName="sexo"  id="tipoc" class="form-select">
                       <option value="1">Masculino</option>
                       <option value="2">Femenino</option>
                       <option value="3">No especificado</option>
                   </select>
                   <span *ngIf="campoNoValido('sexo')" class="form-text text-danger">*coloque un genero
                    valido
                </span>
               </div> 

           </div> 
         
        </div>


        <div class="row g-3">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Fecha de Nacimiento</label>
                    <input formControlName="Nacimiento" type="date" class="form-control" id="fechan" 
                    autocomplete="off">
                    <span *ngIf="campoNoValido('Nacimiento')" class="form-text text-danger">*coloque una fecha
                        valida
                    </span>

                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Familiar Responsable</label>
                    <input  formControlName="Familiar" type="text" class="form-control"  id="celular" autocomplete="off">
                    <span *ngIf="campoNoValido('Familiar')" class="form-text text-danger">*coloque un Familar
                   
                    </span>
                </div>
            </div>
          
        </div>

     
        <div class="row g-3">
            <div class="col-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Direccíon</label>
                    <input  formControlName="Direccion" type="text"  class="form-control" id="direccion"
                    autocomplete="off">
                    <span *ngIf="campoNoValido('Direccion')" class="form-text text-danger">*coloque una Direccion
                        valida
                    </span>
                </div>
            </div>
            <div class="col-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Organo o autoridad que refiere</label>
                    <select formControlName="Organo"  id="tipoc" class="form-select">
                        <option></option>
                        <option value="1">Juzgado de niñez y adolescencia</option>
                        <option value="2">Senniaf Sede</option>
                        <option value="3">Senniaf Panama Oeste </option>
                    </select>
                    <span *ngIf="campoNoValido('Organo')" class="form-text text-danger">*coloque un oganismo
                        valido
                    </span>
                </div>
            </div>

        </div>
        <div class="row g-3">
            <div class="col-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Fecha de ingreso</label>
                    <input formControlName="FechaIngreso" type="date" class="form-control" id="fechan" 
                    autocomplete="off">
                    <span *ngIf="campoNoValido('FechaIngreso')" class="form-text text-danger">*coloque una fecha
                        valida
                    </span>
                </div>
            </div>
            <div class="col-6">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Escolaridad</label>
                    <select  formControlName="Escolaridad" id="tipoc" class="form-select">
                        <option></option>
                        <option value="1">Primer Grado</option>
                        <option value="2">Segundo Grado</option>
                        <option value="3">Tercer Grado</option>
                        <option value="4">cuarto Grado</option>
                        <option value="5">quinto Grado</option>
                        <option value="6">Sexto Grado</option>
                        <option value="7">Septimo Grado</option>
                        <option value="8">Octavo Grado</option>
                        <option value="9">Noveno Grado</option>
                        <option value="10">Decimo Grado</option>
                        <option value="11">Undecimo Grado</option>
                        <option value="12">Duodecimo Grado</option>
                    </select>
                    <span *ngIf="campoNoValido('Escolaridad')" class="form-text text-danger">*coloque una escolaridad
                        valida
                    </span>
                </div>
            </div>

        </div>
        <div class="row g-3">
            <div class="col-4">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Etnia</label>
                    <select formControlName="Etnia" id="tipoc" class="form-select">
                        <option></option>
                        <option value="1">Ngöbe-Buglé</option>
                        <option value="2">Naso-Teribe</option>
                        <option value="3">Bri-bri</option>
                        <option value="4">Emberá</option>
                        <option value="5">Wounaan</option>
                        <option value="6">Gunas</option>
                        <option value="7">mestizos</option>
                        <option value="8">mulatos</option>
                        
                        
                        
                        
                    </select>
                    <span *ngIf="campoNoValido('Etnia')" class="form-text text-danger">*coloque un etnia
                        valida
                    </span>
                </div>
            </div>
            <div class="col-4">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Motivo de ingreso</label>
                    <select formControlName="Motivo" id="tipoc" class="form-select">
                        <option></option>
                        <option value="1">Protección</option>
                        <option value="2">Maltrato físico</option>
                        <option value="3">Abuso</option>
                        <option value="4">Maltrato emocional</option>
                        <option value="5">Negligencia</option>
                        <option value="6">Abandono</option>
                     
                        
                        
                        
                        
                    </select>
                    <span *ngIf="campoNoValido('Motivo')" class="form-text text-danger">*coloque un motivo
                        valido
                    </span>
                </div>
            </div>
            <div class="col-4">
                <div class="mb-3">
                    <label for="recipient-name" class="col-form-label">Familiares</label>
                    <select (change)="Capturar($event)" id="tipoc" class="form-select">
                        <option>Seleccione una opcion</option>
                        <option value="1">Si</option>
                        <option value="2">No</option>

                        
                        
                        
                        
                    </select>
               
                </div>
            </div>

        </div>

        <div class="table-responsive text-center" *ngIf="Familares">
            <button (click)="showModalDialog()"  style="width: 20% ;" pButton pRipple type="button" label="Agregar Familiar"
            class="p-button-raised p-button-help"></button>
            <br>
            <br>

            <table class="table table-bordered table-hover ">
                <thead >
                  <tr>
                    <th scope="col">Cedula</th>
                    <th scope="col">Parentesco</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Edad</th>
                    <th scope="col">Eliminar</th>
                  </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of Familia">
                        <th scope="col">{{item.cedula}}</th>
                        <th scope="col">{{item.ParentescoNomb}}</th>
                        <th scope="col">{{item.Nombre}}</th>
                        <th scope="col">{{item.Edad}}</th>
                        <th>
                            <button (click)="Eliminar(item)" pButton pRipple type="button" label="Eliminar" class="p-button-danger"></button>
                        </th>
                      </tr>
                 
                </tbody>
              </table>
        </div>
        <br>
        <div class="text-center">

            <div class="row g-3">
                <div class="mb-3">
            <div class="file-select" id="src-file1" >
                <input formControlName="imagen"  type="file" [(ngModel)]="filterName" (change)="evento($event)" #takeInput name="filterName">
                <br>
          
              </div>
              <br>
              <br>
              <img class="imagen" src="{{seccionimg}}" alt="">
            </div>
        
        </div>
        </div>



        <div class="my-2 text-center" *ngIf="miFormulario.invalid">
            <span class="form-text text-danger ">
                *Por favor llenar los campos de forma correcta para completar registro.
            </span>
        </div>
        <div class="my-2 text-center">
            <span *ngIf="miFormulario.valid" class="form-text text-success">
                *Todo correcto para registro
            </span>
        </div>
    

        <br><br>
        <div class="col-12 text-center">
            <button [disabled]="miFormulario.invalid"  style="width: 80% ;" pButton pRipple type="submit" label="Registrar"
                class="p-button-raised p-button-help"></button>
        </div>

        </form>
    </p-card>
    <br><br>


          <!-- Toast de eventos -->
          <p-toast position="bottom-center"></p-toast>

          <p-dialog header="Familiares" [(visible)]="displayModal" [modal]="true" [style]="{width: '50vw'}"
    [draggable]="false" [resizable]="false">

    <div class="mb-3">
        <label for="recipient-name" class="col-form-label">Parentesco</label>
        <select [(ngModel)]="parent"  id="tipoc" class="form-select">
            <option>Seleccione una opcion</option>
            <option *ngFor="let item of Parentesco index" [value]="item.id">{{item.Nombre}}</option>
   
        </select>
 
    </div>

    <div class="mb-3">
        <label for="recipient-name" class="col-form-label">Nombre Completo del Familiar</label>
        <input  [(ngModel)]="name"  type="text" class="form-control"  autocomplete="off" id="nombre">


    </div>

    <div class="mb-3">
        <label for="recipient-name" class="col-form-label">Edad</label>
        <input  [(ngModel)]="edad"   type="number" class="form-control"  autocomplete="off" id="nombre">


    </div>
        <ng-template pTemplate="footer">
            <p-button icon="pi pi-ban" (click)="displayModal=false" label="Cancelar" styleClass="p-button-text"></p-button>
        <p-button icon="pi pi-check" (click)="RegistrarFamiliar()"  label="Registrar" styleClass="p-button-text"></p-button>
       
        </ng-template>
</p-dialog>
</div>